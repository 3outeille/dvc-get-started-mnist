schema: '2.0'
stages:
  prepare:
    cmd: python3 src/prepare.py
    deps:
    - path: data/raw/
      md5: b6c29e96813679dd8c451c9b5ca86e2c.dir
      size: 11594722
      nfiles: 4
    - path: src/prepare.py
      md5: 21e57d729047c4e7a38871e98d011590
      size: 3834
    params:
      params.yaml:
        prepare.remix: true
        prepare.remix_split: 0.2
        prepare.seed: 20210428
    outs:
    - path: data/prepared
      md5: 61c41f920b1ecba705776ecbd951aaf8.dir
      size: 54951020
      nfiles: 2
  preprocess:
    cmd: python3 src/preprocess.py
    deps:
    - path: data/prepared/
      md5: 61c41f920b1ecba705776ecbd951aaf8.dir
      size: 54951020
      nfiles: 2
    - path: src/preprocess.py
      md5: b50c340172d6ac47b2840ca7a9184d9e
      size: 2337
    params:
      params.yaml:
        preprocess.add_noise: false
        preprocess.noise_amount: 0.0004
        preprocess.noise_s_vs_p: 0.5
        preprocess.normalize: true
        preprocess.seed: 20210428
        preprocess.shuffle: false
    outs:
    - path: data/preprocessed/
      md5: a43a0ef299c2774f881507f3091a3ae6.dir
      size: 441841020
      nfiles: 2
  train:
    cmd: python3 src/train.py
    deps:
    - path: data/prepared/
      md5: 61c41f920b1ecba705776ecbd951aaf8.dir
      size: 54951020
      nfiles: 2
    - path: src/model.py
      md5: cb24a10ab2c18188f11dc21fc78d8bb1
      size: 3362
    - path: src/train.py
      md5: 30c2b5917548d51d8b129e3b4a4f0710
      size: 1916
    params:
      params.yaml:
        model.cnn.conv_kernel_size: 3
        model.cnn.conv_units: 32
        model.cnn.dense_units: 128
        model.cnn.dropout: 0.5
        model.loss: CategoricalCrossentropy
        model.mlp.activation: relu
        model.mlp.units: 16
        model.name: cnn
        model.optimizer: Adam
        train.batch_size: 128
        train.epochs: 10
        train.seed: 20210428
        train.validation_split: 0.2
    outs:
    - path: models/model.h5
      md5: 24a7d613537c88fd91a5e377881e2a1f
      size: 8363240
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: models/model.h5
      md5: 24a7d613537c88fd91a5e377881e2a1f
      size: 8363240
    - path: src/evaluate.py
      md5: 7abfb34c007a39e9697400a7f5dd3b7a
      size: 697
    - path: src/model.py
      md5: cb24a10ab2c18188f11dc21fc78d8bb1
      size: 3362
